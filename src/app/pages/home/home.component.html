<div class="entire-area">
  <div class="area-on-the-left">
    <div class="table-buttons">
      <span>Total = {{ games.length  }} </span>
      <button type="button" class="btn btn-secondary btn-sm" (click)="scanParameters.open()" [disabled]="scanRunning">Scan</button>
      <button type="button" class="btn btn-secondary btn-sm" (click)="undoRemove()" [disabled]="lastRemovedGame == null">Undo</button>
      <label>Listing</label>:
      <select (change)="getGames($event.target.value)">
        <option *ngFor="let listing of listings" value="{{ listing }}" [selected]="listing == selectedListing">
          {{ listing }}
        </option>
      </select>
    </div>
    <div id="games-table">
      <table *ngIf="games">
        <tr>
          <th class="name-title">Name</th>
          <th class="company-title">Company</th>
          <th class="year-title">Year</th>
        </tr>
      </table>
      <div id="games-table-data" tabindex="0" (keydown)="$event.preventDefault()">
        <table>
          <tr *ngFor="let game of games" (click)="showInfo(game)" id="{{ game.sha1Code }}" class="{{ selectedGameClass(game) }}">
            <td class="medium-img"><img src="{{ getGameMedium(game) }}"/></td>
            <td class="name">{{ game.name }}</td>
            <td class="company">{{ game.company }}</td>
            <td class="year">{{ game.year }}</td>
            <td>
              <span>
                <img src="assets/images/operations/play.png" (click)="launch(game)">
                <img src="assets/images/operations/remove.png" (click)="$event.stopPropagation(); remove(game)">
              </span>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <div class="area-on-the-right">
    <div>
      <div class="screenshot">
        <img src="{{ screenshot_a_1.screenshot1 }}" class="{{ transparent1 }}">
        <img src="{{ screenshot_a_2.screenshot1 }}" class="{{ transparent2 }}">
      </div>

      <div class="screenshot">
        <img src="{{ screenshot_b_1.screenshot2 }}" class="{{ transparent1 }}">
        <img src="{{ screenshot_b_2.screenshot2 }}" class="{{ transparent2 }}">
      </div>

      <div class="additional-info" *ngIf="selectedGame">
        <button type="button" class="btn btn-secondary btn-sm" (click)="launch(selectedGame)">Launch</button>
        <table>
          <tr *ngFor="let detail of getFilteredGameDetails()">
            <td class="game-detail-name">{{ detail.name }}</td>
            <td class="game-detail-value">
              <ng-container [ngTemplateOutlet]="this[detail.blockName]" [ngTemplateOutletContext]="{ $implicit: detail }"></ng-container>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>

<ng-template #gameDetailSimpleText let-detail>
  {{ selectedGame[detail.value] }}
</ng-template>

<ng-template #gameDetailFiles>
  <div class="long-names" *ngFor="let file of getSelectedGameFiles()">{{ file }}</div>
</ng-template>

<ng-template #gameDetailMedium>
  {{ selectedGameMedium | async }}
</ng-template>

<ng-template #gameDetailSize>
  {{ getSizeDisplayString() }}
</ng-template>

<ng-template #gameDetailCountry>
  <div id="game-detail-country">
    <img *ngIf="countryFlags.get(selectedGame.country)" src="assets/images/flags/{{ countryFlags.get(selectedGame.country) }}.png"/>
    {{ selectedGame.country }}
  </div>
</ng-template>

<ng-template #gameDetailGenerations>
  <div id="game-detail-generations">
    <img *ngIf="isGenerationMSX()" src="assets/images/generations/msx.png"/>
    <img *ngIf="isGenerationMSX2()" src="assets/images/generations/msx2.png"/>
    <img *ngIf="isGenerationMSX2Plus()" src="assets/images/generations/msx2p.png"/>
    <img *ngIf="isGenerationTurboR()" src="assets/images/generations/msxturbor.png"/>
  </div>
</ng-template>

<ng-template #gameDetailSounds>
  {{ getSoundsDisplayString() }}
</ng-template>

<ng-template #gameDetailGenres>
  {{ getGenresDisplayString() }}
</ng-template>

<ng-template #gameDetailGenerationMSXLink>
  <a *ngIf="selectedGame.generationMSXId < 10000; else generationMSXNotAvailable" href="#" (click)="openGenerationMSXInBrowser(selectedGame.generationMSXId)">{{ selectedGame.generationMSXId }}</a>
  <ng-template #generationMSXNotAvailable>Not added yet</ng-template>
</ng-template>

<app-scan-parameters (parameters)="startScan($event)"></app-scan-parameters>